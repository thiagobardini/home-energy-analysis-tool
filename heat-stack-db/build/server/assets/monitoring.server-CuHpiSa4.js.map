{"version":3,"file":"monitoring.server-CuHpiSa4.js","sources":["../../../app/utils/monitoring.server.ts"],"sourcesContent":["import { nodeProfilingIntegration } from '@sentry/profiling-node'\nimport Sentry from '@sentry/remix'\n\nexport function init() {\n\tSentry.init({\n\t\tdsn: ENV.SENTRY_DSN,\n\t\tenvironment: ENV.MODE,\n\t\ttracesSampleRate: ENV.MODE === 'production' ? 1 : 0,\n\t\tdenyUrls: [\n\t\t\t/\\/resources\\/healthcheck/,\n\t\t\t// TODO: be smarter about the public assets...\n\t\t\t/\\/build\\//,\n\t\t\t/\\/favicons\\//,\n\t\t\t/\\/img\\//,\n\t\t\t/\\/fonts\\//,\n\t\t\t/\\/favicon.ico/,\n\t\t\t/\\/site\\.webmanifest/,\n\t\t],\n\t\tintegrations: [\n\t\t\tSentry.httpIntegration(),\n\t\t\tSentry.prismaIntegration(),\n\t\t\tnodeProfilingIntegration(),\n\t\t],\n\t\ttracesSampler(samplingContext) {\n\t\t\t// ignore healthcheck transactions by other services (consul, etc.)\n\t\t\tif (samplingContext.request?.url?.includes('/resources/healthcheck')) {\n\t\t\t\treturn 0\n\t\t\t}\n\t\t\treturn 1\n\t\t},\n\t\tbeforeSendTransaction(event) {\n\t\t\t// ignore all healthcheck related transactions\n\t\t\t//  note that name of header here is case-sensitive\n\t\t\tif (event.request?.headers?.['x-healthcheck'] === 'true') {\n\t\t\t\treturn null\n\t\t\t}\n\n\t\t\treturn event\n\t\t},\n\t})\n}\n"],"names":["Sentry"],"mappings":";;AAGO,SAAS,OAAO;AACtBA,kBAAO,KAAK;AAAA,IACX,KAAK,IAAI;AAAA,IACT,aAAa,IAAI;AAAA,IACjB,kBAAkB,IAAI,SAAS,eAAe,IAAI;AAAA,IAClD,UAAU;AAAA,MACT;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAAA,IACA,cAAc;AAAA,MACbA,gBAAO,gBAAgB;AAAA,MACvBA,gBAAO,kBAAkB;AAAA,MACzB,yBAAyB;AAAA,IAC1B;AAAA,IACA,cAAc,iBAAiB;;AAE9B,WAAI,2BAAgB,YAAhB,mBAAyB,QAAzB,mBAA8B,SAAS,2BAA2B;AAC9D,eAAA;AAAA,MACR;AACO,aAAA;AAAA,IACR;AAAA,IACA,sBAAsB,OAAO;;AAG5B,YAAI,iBAAM,YAAN,mBAAe,YAAf,mBAAyB,sBAAqB,QAAQ;AAClD,eAAA;AAAA,MACR;AAEO,aAAA;AAAA,IACR;AAAA,EAAA,CACA;AACF;"}