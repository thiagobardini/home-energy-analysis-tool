import{j as e}from"./jsx-runtime-D1yySo7E.js";import{z as f}from"./index-BeXw7Xwl.js";import{F as m,E as j}from"./forms-O3akMyig.js";import{B as g}from"./button-xs8ZcSgc.js";import{I as r}from"./icon-CC3MP7l8.js";import{S as l}from"./status-button-Bx4F4H9E.js";import{g as v,b as p}from"./misc-CxaYal_B.js";import{N as b,U as P}from"./user-validation-CpoOsRJY.js";import{b as d,L as n,u as c}from"./components-C2HTMhgG.js";import{u as w,g as S,a as u}from"./helpers-CMO8ncdm.js";import{g as y}from"./constraint-BS8S8JXD.js";import{p as N}from"./parse-Cj2OtakU.js";import"./index-ikwP-usE.js";import"./index-DbU3sxCe.js";import"./index-CcD7lzrX.js";import"./label-Bak8eTW5.js";import"./tooltip-wwqaYhkn.js";const J={getSitemapEntries:()=>null},h=f.object({name:b.optional(),username:P}),F="update-profile",C="sign-out-of-sessions",k="delete-data";function K(){var t;const s=d();return e.jsxs("div",{className:"flex flex-col gap-12",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative h-52 w-52",children:[e.jsx("img",{src:v((t=s.user.image)==null?void 0:t.id),alt:s.user.username,className:"h-full w-full rounded-full object-cover"}),e.jsx(g,{asChild:!0,variant:"outline",className:"absolute -right-3 top-3 flex h-10 w-10 items-center justify-center rounded-full p-0",children:e.jsx(n,{preventScrollReset:!0,to:"photo",title:"Change profile photo","aria-label":"Change profile photo",children:e.jsx(r,{name:"camera",className:"h-4 w-4"})})})]})}),e.jsx(D,{}),e.jsx("div",{className:"col-span-6 my-6 h-1 border-b-[1.5px] border-foreground"}),e.jsxs("div",{className:"col-span-full flex flex-col gap-6",children:[e.jsx("div",{children:e.jsx(n,{to:"change-email",children:e.jsxs(r,{name:"envelope-closed",children:["Change email from ",s.user.email]})})}),e.jsx("div",{children:e.jsx(n,{to:"two-factor",children:s.isTwoFactorEnabled?e.jsx(r,{name:"lock-closed",children:"2FA is enabled"}):e.jsx(r,{name:"lock-open-1",children:"Enable 2FA"})})}),e.jsx("div",{children:e.jsx(n,{to:s.hasPassword?"password":"password/create",children:e.jsx(r,{name:"dots-horizontal",children:s.hasPassword?"Change Password":"Create a Password"})})}),e.jsx("div",{children:e.jsx(n,{to:"connections",children:e.jsx(r,{name:"link-2",children:"Manage connections"})})}),e.jsx("div",{children:e.jsx(n,{reloadDocument:!0,download:"my-epic-notes-data.json",to:"/resources/download-user-data",children:e.jsx(r,{name:"download",children:"Download your data"})})}),e.jsx(I,{}),e.jsx(A,{})]})]})}function D(){var i;const s=d(),t=c(),[o,a]=w({id:"edit-profile",constraint:y(h),lastResult:(i=t.data)==null?void 0:i.result,onValidate({formData:x}){return N(x,{schema:h})},defaultValue:{username:s.user.username,name:s.user.name}});return e.jsxs(t.Form,{method:"POST",...S(o),children:[e.jsxs("div",{className:"grid grid-cols-6 gap-x-10",children:[e.jsx(m,{className:"col-span-3",labelProps:{htmlFor:a.username.id,children:"Username"},inputProps:u(a.username,{type:"text"}),errors:a.username.errors}),e.jsx(m,{className:"col-span-3",labelProps:{htmlFor:a.name.id,children:"Name"},inputProps:u(a.name,{type:"text"}),errors:a.name.errors})]}),e.jsx(j,{errors:o.errors,id:o.errorId}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx(l,{type:"submit",size:"wide",name:"intent",value:F,status:t.state!=="idle"?"pending":o.status??"idle",children:"Save changes"})})]})}function I(){var i;const s=d(),t=p(),o=c(),a=s.user._count.sessions-1;return e.jsx("div",{children:a?e.jsx(o.Form,{method:"POST",children:e.jsx(l,{...t.getButtonProps({type:"submit",name:"intent",value:C}),variant:t.doubleCheck?"destructive":"default",status:o.state!=="idle"?"pending":((i=o.data)==null?void 0:i.status)??"idle",children:e.jsx(r,{name:"avatar",children:t.doubleCheck?"Are you sure?":`Sign out of ${a} other sessions`})})}):e.jsx(r,{name:"avatar",children:"This is your only session"})})}function A(){const s=p(),t=c();return e.jsx("div",{children:e.jsx(t.Form,{method:"POST",children:e.jsx(l,{...s.getButtonProps({type:"submit",name:"intent",value:k}),variant:s.doubleCheck?"destructive":"default",status:t.state!=="idle"?"pending":"idle",children:e.jsx(r,{name:"trash",children:s.doubleCheck?"Are you sure?":"Delete all your data"})})})})}export{K as default,J as handle};
//# sourceMappingURL=profile.index-D_bUgvDX.js.map
