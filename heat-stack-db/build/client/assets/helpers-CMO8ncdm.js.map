{"version":3,"file":"helpers-CMO8ncdm.js","sources":["../../../node_modules/@conform-to/dom/_virtual/_rollupPluginBabelHelpers.mjs","../../../node_modules/@conform-to/dom/formdata.mjs","../../../node_modules/@conform-to/dom/util.mjs","../../../node_modules/@conform-to/dom/dom.mjs","../../../node_modules/@conform-to/dom/submission.mjs","../../../node_modules/@conform-to/dom/form.mjs","../../../node_modules/@conform-to/react/_virtual/_rollupPluginBabelHelpers.mjs","../../../node_modules/@conform-to/react/context.mjs","../../../node_modules/@conform-to/react/hooks.mjs","../../../node_modules/@conform-to/react/helpers.mjs"],"sourcesContent":["function ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nexport { _defineProperty as defineProperty, _objectSpread2 as objectSpread2, _toPrimitive as toPrimitive, _toPropertyKey as toPropertyKey };\n","/**\n * Construct a form data with the submitter value.\n * It utilizes the submitter argument on the FormData constructor from modern browsers\n * with fallback to append the submitter value in case it is not unsupported.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/FormData/FormData#parameters\n */\nfunction getFormData(form, submitter) {\n  var payload = new FormData(form, submitter);\n  if (submitter && submitter.type === 'submit' && submitter.name !== '') {\n    var entries = payload.getAll(submitter.name);\n\n    // This assumes the submitter value to be always unique, which should be fine in most cases\n    if (!entries.includes(submitter.value)) {\n      payload.append(submitter.name, submitter.value);\n    }\n  }\n  return payload;\n}\n\n/**\n * Returns the paths from a name based on the JS syntax convention\n * @example\n * ```js\n * const paths = getPaths('todos[0].content'); // ['todos', 0, 'content']\n * ```\n */\nfunction getPaths(name) {\n  if (!name) {\n    return [];\n  }\n  return name.split(/\\.|(\\[\\d*\\])/).reduce((result, segment) => {\n    if (typeof segment !== 'undefined' && segment !== '' && segment !== '__proto__' && segment !== 'constructor' && segment !== 'prototype') {\n      if (segment.startsWith('[') && segment.endsWith(']')) {\n        var index = segment.slice(1, -1);\n        result.push(Number(index));\n      } else {\n        result.push(segment);\n      }\n    }\n    return result;\n  }, []);\n}\n\n/**\n * Returns a formatted name from the paths based on the JS syntax convention\n * @example\n * ```js\n * const name = formatPaths(['todos', 0, 'content']); // \"todos[0].content\"\n * ```\n */\nfunction formatPaths(paths) {\n  return paths.reduce((name, path) => {\n    if (typeof path === 'number') {\n      return \"\".concat(name, \"[\").concat(Number.isNaN(path) ? '' : path, \"]\");\n    }\n    if (name === '' || path === '') {\n      return [name, path].join('');\n    }\n    return [name, path].join('.');\n  }, '');\n}\n\n/**\n * Format based on a prefix and a path\n */\nfunction formatName(prefix, path) {\n  return typeof path !== 'undefined' ? formatPaths([...getPaths(prefix), path]) : prefix !== null && prefix !== void 0 ? prefix : '';\n}\n\n/**\n * Check if a name match the prefix paths\n */\nfunction isPrefix(name, prefix) {\n  var paths = getPaths(name);\n  var prefixPaths = getPaths(prefix);\n  return paths.length >= prefixPaths.length && prefixPaths.every((path, index) => paths[index] === path);\n}\n\n/**\n * Assign a value to a target object by following the paths\n */\nfunction setValue(target, name, valueFn) {\n  var paths = getPaths(name);\n  var length = paths.length;\n  var lastIndex = length - 1;\n  var index = -1;\n  var pointer = target;\n  while (pointer != null && ++index < length) {\n    var key = paths[index];\n    var nextKey = paths[index + 1];\n    var newValue = index != lastIndex ? Object.prototype.hasOwnProperty.call(pointer, key) && pointer[key] !== null ? pointer[key] : typeof nextKey === 'number' ? [] : {} : valueFn(pointer[key]);\n    pointer[key] = newValue;\n    pointer = pointer[key];\n  }\n}\n\n/**\n * Retrive the value from a target object by following the paths\n */\nfunction getValue(target, name) {\n  var pointer = target;\n  for (var path of getPaths(name)) {\n    if (typeof pointer === 'undefined' || pointer == null) {\n      break;\n    }\n    if (!Object.prototype.hasOwnProperty.call(pointer, path)) {\n      return;\n    }\n    if (isPlainObject(pointer) && typeof path === 'string') {\n      pointer = pointer[path];\n    } else if (Array.isArray(pointer) && typeof path === 'number') {\n      pointer = pointer[path];\n    } else {\n      return;\n    }\n  }\n  return pointer;\n}\n\n/**\n * Check if the value is a plain object\n */\nfunction isPlainObject(obj) {\n  return !!obj && obj.constructor === Object && Object.getPrototypeOf(obj) === Object.prototype;\n}\n\n/**\n * Check if the value is a File\n */\nfunction isFile(obj) {\n  // Skip checking if File is not defined\n  if (typeof File === 'undefined') {\n    return false;\n  }\n  return obj instanceof File;\n}\n\n/**\n * Normalize value by removing empty object or array, empty string and null values\n */\n\nfunction normalize(value) {\n  var acceptFile = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  if (isPlainObject(value)) {\n    var obj = Object.keys(value).sort().reduce((result, key) => {\n      var data = normalize(value[key], acceptFile);\n      if (typeof data !== 'undefined') {\n        result[key] = data;\n      }\n      return result;\n    }, {});\n    if (Object.keys(obj).length === 0) {\n      return;\n    }\n    return obj;\n  }\n  if (Array.isArray(value)) {\n    if (value.length === 0) {\n      return undefined;\n    }\n    return value.map(item => normalize(item, acceptFile));\n  }\n  if (typeof value === 'string' && value === '' || value === null || isFile(value) && (!acceptFile || value.size === 0)) {\n    return;\n  }\n  return value;\n}\n\n/**\n * Flatten a tree into a dictionary\n */\nfunction flatten(data) {\n  var _options$resolve;\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var result = {};\n  var resolve = (_options$resolve = options.resolve) !== null && _options$resolve !== void 0 ? _options$resolve : data => data;\n  function process(data, prefix) {\n    var value = normalize(resolve(data));\n    if (typeof value !== 'undefined') {\n      result[prefix] = value;\n    }\n    if (Array.isArray(data)) {\n      for (var i = 0; i < data.length; i++) {\n        process(data[i], \"\".concat(prefix, \"[\").concat(i, \"]\"));\n      }\n    } else if (isPlainObject(data)) {\n      for (var [key, _value] of Object.entries(data)) {\n        process(_value, prefix ? \"\".concat(prefix, \".\").concat(key) : key);\n      }\n    }\n  }\n  if (data) {\n    var _options$prefix;\n    process(data, (_options$prefix = options.prefix) !== null && _options$prefix !== void 0 ? _options$prefix : '');\n  }\n  return result;\n}\n\nexport { flatten, formatName, formatPaths, getFormData, getPaths, getValue, isFile, isPlainObject, isPrefix, normalize, setValue };\n","function invariant(expectedCondition, message) {\n  if (!expectedCondition) {\n    throw new Error(message);\n  }\n}\nfunction generateId() {\n  return (Date.now() * Math.random()).toString(36);\n}\nfunction clone(data) {\n  return JSON.parse(JSON.stringify(data));\n}\n\nexport { clone, generateId, invariant };\n","import { invariant } from './util.mjs';\n\n/**\n * Element that user can interact with,\n * includes `<input>`, `<select>` and `<textarea>`.\n */\n\n/**\n * HTML Element that can be used as a form control,\n * includes `<input>`, `<select>`, `<textarea>` and `<button>`.\n */\n\n/**\n * Form Control element. It can either be a submit button or a submit input.\n */\n\n/**\n * A type guard to check if the provided element is a form control\n */\nfunction isFormControl(element) {\n  return element instanceof Element && (element.tagName === 'INPUT' || element.tagName === 'SELECT' || element.tagName === 'TEXTAREA' || element.tagName === 'BUTTON');\n}\n\n/**\n * A type guard to check if the provided element is a field element, which\n * is a form control excluding submit, button and reset type.\n */\nfunction isFieldElement(element) {\n  return isFormControl(element) && element.type !== 'submit' && element.type !== 'button' && element.type !== 'reset';\n}\n\n/**\n * Resolves the action from the submit event\n * with respect to the submitter `formaction` attribute.\n */\nfunction getFormAction(event) {\n  var _ref, _submitter$getAttribu;\n  var form = event.target;\n  var submitter = event.submitter;\n  return (_ref = (_submitter$getAttribu = submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute('formaction')) !== null && _submitter$getAttribu !== void 0 ? _submitter$getAttribu : form.getAttribute('action')) !== null && _ref !== void 0 ? _ref : \"\".concat(location.pathname).concat(location.search);\n}\n\n/**\n * Resolves the encoding type from the submit event\n * with respect to the submitter `formenctype` attribute.\n */\nfunction getFormEncType(event) {\n  var _submitter$getAttribu2;\n  var form = event.target;\n  var submitter = event.submitter;\n  var encType = (_submitter$getAttribu2 = submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute('formenctype')) !== null && _submitter$getAttribu2 !== void 0 ? _submitter$getAttribu2 : form.enctype;\n  if (encType === 'multipart/form-data') {\n    return encType;\n  }\n  return 'application/x-www-form-urlencoded';\n}\n\n/**\n * Resolves the method from the submit event\n * with respect to the submitter `formmethod` attribute.\n */\nfunction getFormMethod(event) {\n  var _ref2, _submitter$getAttribu3;\n  var form = event.target;\n  var submitter = event.submitter;\n  var method = (_ref2 = (_submitter$getAttribu3 = submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute('formmethod')) !== null && _submitter$getAttribu3 !== void 0 ? _submitter$getAttribu3 : form.getAttribute('method')) === null || _ref2 === void 0 ? void 0 : _ref2.toUpperCase();\n  switch (method) {\n    case 'POST':\n    case 'PUT':\n    case 'PATCH':\n    case 'DELETE':\n      return method;\n  }\n  return 'GET';\n}\n\n/**\n * Trigger a form submit event with an optional submitter.\n * If the submitter is not mounted, it will be appended to the form and removed after submission.\n */\nfunction requestSubmit(form, submitter) {\n  invariant(!!form, 'Failed to submit the form. The element provided is null or undefined.');\n  if (typeof form.requestSubmit === 'function') {\n    form.requestSubmit(submitter);\n  } else {\n    var event = new SubmitEvent('submit', {\n      bubbles: true,\n      cancelable: true,\n      submitter\n    });\n    form.dispatchEvent(event);\n  }\n}\n\nexport { getFormAction, getFormEncType, getFormMethod, isFieldElement, isFormControl, requestSubmit };\n","import { objectSpread2 as _objectSpread2 } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport { formatName, setValue, isPlainObject, getValue, normalize, flatten, isPrefix } from './formdata.mjs';\nimport { invariant } from './util.mjs';\n\n/**\n * The name to be used when submitting a form control\n */\nvar INTENT = '__intent__';\n\n/**\n * The name to be used when submitting a state\n */\nvar STATE = '__state__';\nfunction getSubmissionContext(body) {\n  var intent = body.get(INTENT);\n  var state = body.get(STATE);\n  invariant((typeof intent === 'string' || intent === null) && (typeof state === 'string' || state === null), \"The input name \\\"\".concat(INTENT, \"\\\" and \\\"\").concat(STATE, \"\\\" are reserved by Conform. Please use another name for your input.\"));\n  var context = {\n    payload: {},\n    fields: new Set(),\n    intent: getIntent(intent)\n  };\n  if (state) {\n    context.state = JSON.parse(state);\n  }\n  var _loop = function _loop(next) {\n    if (name === INTENT || name === STATE) {\n      return 1; // continue\n    }\n    context.fields.add(name);\n    setValue(context.payload, name, prev => {\n      if (!prev) {\n        return next;\n      } else if (Array.isArray(prev)) {\n        return prev.concat(next);\n      } else {\n        return [prev, next];\n      }\n    });\n  };\n  for (var [name, next] of body.entries()) {\n    if (_loop(next)) continue;\n  }\n  return context;\n}\nfunction parse(payload, options) {\n  var context = getSubmissionContext(payload);\n  var intent = context.intent;\n  if (intent) {\n    switch (intent.type) {\n      case 'update':\n        {\n          var name = formatName(intent.payload.name, intent.payload.index);\n          var _value = intent.payload.value;\n          if (typeof intent.payload.value !== 'undefined') {\n            if (name) {\n              setValue(context.payload, name, () => _value);\n            } else {\n              context.payload = _value;\n            }\n          }\n          break;\n        }\n      case 'reset':\n        {\n          var _name = formatName(intent.payload.name, intent.payload.index);\n          if (_name) {\n            setValue(context.payload, _name, () => undefined);\n          } else {\n            context.payload = {};\n          }\n          break;\n        }\n      case 'insert':\n      case 'remove':\n      case 'reorder':\n        {\n          setListValue(context.payload, intent);\n          break;\n        }\n    }\n  }\n  var result = options.resolve(context.payload, intent);\n  var mergeResolveResult = resolved => createSubmission(_objectSpread2(_objectSpread2({}, context), {}, {\n    value: resolved.value,\n    error: resolved.error\n  }));\n  if (result instanceof Promise) {\n    return result.then(mergeResolveResult);\n  }\n  return mergeResolveResult(result);\n}\nfunction createSubmission(context) {\n  if (context.intent || !context.value || context.error) {\n    return {\n      status: !context.intent ? 'error' : undefined,\n      payload: context.payload,\n      error: typeof context.error !== 'undefined' ? context.error : {},\n      reply(options) {\n        return replySubmission(context, options);\n      }\n    };\n  }\n  return {\n    status: 'success',\n    payload: context.payload,\n    value: context.value,\n    reply(options) {\n      return replySubmission(context, options);\n    }\n  };\n}\nfunction replySubmission(context) {\n  var _context$intent, _context$intent$paylo, _options$formErrors, _normalize;\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if ('resetForm' in options && options.resetForm || ((_context$intent = context.intent) === null || _context$intent === void 0 ? void 0 : _context$intent.type) === 'reset' && ((_context$intent$paylo = context.intent.payload.name) !== null && _context$intent$paylo !== void 0 ? _context$intent$paylo : '') === '') {\n    return {\n      initialValue: null\n    };\n  }\n  if ('hideFields' in options && options.hideFields) {\n    for (var name of options.hideFields) {\n      var _value2 = getValue(context.payload, name);\n      if (typeof _value2 !== 'undefined') {\n        setValue(context.payload, name, () => undefined);\n      }\n    }\n  }\n  var extraError = 'formErrors' in options || 'fieldErrors' in options ? normalize(_objectSpread2({\n    '': (_options$formErrors = options.formErrors) !== null && _options$formErrors !== void 0 ? _options$formErrors : null\n  }, options.fieldErrors)) : null;\n  var error = context.error || extraError ? _objectSpread2(_objectSpread2({}, context.error), extraError) : undefined;\n  return {\n    status: context.intent ? undefined : error ? 'error' : 'success',\n    intent: context.intent ? context.intent : undefined,\n    initialValue: (_normalize = normalize(context.payload,\n    // We can't serialize the file and send it back from the server, but we can preserve it in the client\n    typeof document !== 'undefined')) !== null && _normalize !== void 0 ? _normalize : {},\n    error,\n    state: context.state,\n    fields: Array.from(context.fields)\n  };\n}\nfunction getIntent(serializedIntent) {\n  if (!serializedIntent) {\n    return null;\n  }\n  var control = JSON.parse(serializedIntent);\n  if (typeof control.type !== 'string' || typeof control.payload === 'undefined') {\n    throw new Error('Unknown form control intent');\n  }\n  return control;\n}\nfunction serializeIntent(intent) {\n  switch (intent.type) {\n    case 'insert':\n      return JSON.stringify({\n        type: intent.type,\n        payload: _objectSpread2(_objectSpread2({}, intent.payload), {}, {\n          defaultValue: serialize(intent.payload.defaultValue)\n        })\n      });\n    case 'update':\n      return JSON.stringify({\n        type: intent.type,\n        payload: _objectSpread2(_objectSpread2({}, intent.payload), {}, {\n          value: serialize(intent.payload.value)\n        })\n      });\n    default:\n      return JSON.stringify(intent);\n  }\n}\nfunction updateList(list, intent) {\n  var _intent$payload$index;\n  invariant(Array.isArray(list), \"Failed to update list. The value is not an array.\");\n  switch (intent.type) {\n    case 'insert':\n      list.splice((_intent$payload$index = intent.payload.index) !== null && _intent$payload$index !== void 0 ? _intent$payload$index : list.length, 0, intent.payload.defaultValue);\n      break;\n    case 'remove':\n      list.splice(intent.payload.index, 1);\n      break;\n    case 'reorder':\n      list.splice(intent.payload.to, 0, ...list.splice(intent.payload.from, 1));\n      break;\n    default:\n      throw new Error('Unknown list intent received');\n  }\n}\nfunction setListValue(data, intent) {\n  setValue(data, intent.payload.name, value => {\n    var list = value !== null && value !== void 0 ? value : [];\n    updateList(list, intent);\n    return list;\n  });\n}\n\n/**\n * A placeholder symbol for the root value of a nested object\n */\nvar root = Symbol.for('root');\nfunction setState(state, name, valueFn) {\n  // The keys are sorted in desc so that the root value is handled last\n  var keys = Object.keys(state).sort((prev, next) => next.localeCompare(prev));\n  var target = {};\n  var _loop2 = function _loop2() {\n    var value = state[key];\n    if (isPrefix(key, name) && key !== name) {\n      setValue(target, key, currentValue => {\n        if (typeof currentValue === 'undefined') {\n          return value;\n        }\n\n        // As the key should be unique, if currentValue is already defined,\n        // it must be either an object or an array\n\n        // @ts-expect-error\n        currentValue[root] = value;\n        return currentValue;\n      });\n\n      // Remove the value from the data\n      delete state[key];\n    }\n  };\n  for (var key of keys) {\n    _loop2();\n  }\n  var result = valueFn(getValue(target, name));\n  Object.assign(state, flatten(result, {\n    resolve(data) {\n      if (isPlainObject(data) || Array.isArray(data)) {\n        var _data$root;\n        // @ts-expect-error\n        return (_data$root = data[root]) !== null && _data$root !== void 0 ? _data$root : null;\n      }\n      return data;\n    },\n    prefix: name\n  }));\n}\nfunction setListState(state, intent, getDefaultValue) {\n  setState(state, intent.payload.name, value => {\n    var list = value !== null && value !== void 0 ? value : [];\n    switch (intent.type) {\n      case 'insert':\n        updateList(list, {\n          type: intent.type,\n          payload: _objectSpread2(_objectSpread2({}, intent.payload), {}, {\n            defaultValue: getDefaultValue === null || getDefaultValue === void 0 ? void 0 : getDefaultValue(intent.payload.defaultValue)\n          })\n        });\n        break;\n      default:\n        updateList(list, intent);\n        break;\n    }\n    return list;\n  });\n}\nfunction serialize(defaultValue) {\n  if (isPlainObject(defaultValue)) {\n    // @ts-expect-error FIXME\n    return Object.entries(defaultValue).reduce((result, _ref) => {\n      var [key, value] = _ref;\n      result[key] = serialize(value);\n      return result;\n    }, {});\n  } else if (Array.isArray(defaultValue)) {\n    // @ts-expect-error FIXME\n    return defaultValue.map(serialize);\n  } else if (defaultValue instanceof Date) {\n    // @ts-expect-error FIXME\n    return defaultValue.toISOString();\n  } else if (typeof defaultValue === 'boolean') {\n    // @ts-expect-error FIXME\n    return defaultValue ? 'on' : undefined;\n  } else if (typeof defaultValue === 'number' || typeof defaultValue === 'bigint') {\n    // @ts-expect-error FIXME\n    return defaultValue.toString();\n  } else {\n    // @ts-expect-error FIXME\n    return defaultValue !== null && defaultValue !== void 0 ? defaultValue : undefined;\n  }\n}\n\nexport { INTENT, STATE, createSubmission, getIntent, getSubmissionContext, parse, replySubmission, root, serialize, serializeIntent, setListState, setListValue, setState, updateList };\n","import { objectSpread2 as _objectSpread2 } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport { flatten, formatName, getValue, isPlainObject, isPrefix, setValue, normalize, getFormData, getPaths, formatPaths } from './formdata.mjs';\nimport { getFormAction, getFormEncType, getFormMethod, isFieldElement, requestSubmit } from './dom.mjs';\nimport { generateId, clone, invariant } from './util.mjs';\nimport { serialize, setListState, setListValue, setState, INTENT, serializeIntent, root, getSubmissionContext } from './submission.mjs';\n\nfunction createFormMeta(options, initialized) {\n  var _lastResult$initialVa, _options$constraint, _lastResult$state$val, _lastResult$state, _ref;\n  var lastResult = !initialized ? options.lastResult : undefined;\n  var defaultValue = options.defaultValue ? serialize(options.defaultValue) : {};\n  var initialValue = (_lastResult$initialVa = lastResult === null || lastResult === void 0 ? void 0 : lastResult.initialValue) !== null && _lastResult$initialVa !== void 0 ? _lastResult$initialVa : defaultValue;\n  var result = {\n    formId: options.formId,\n    isValueUpdated: false,\n    submissionStatus: lastResult === null || lastResult === void 0 ? void 0 : lastResult.status,\n    defaultValue,\n    initialValue,\n    value: initialValue,\n    constraint: (_options$constraint = options.constraint) !== null && _options$constraint !== void 0 ? _options$constraint : {},\n    validated: (_lastResult$state$val = lastResult === null || lastResult === void 0 || (_lastResult$state = lastResult.state) === null || _lastResult$state === void 0 ? void 0 : _lastResult$state.validated) !== null && _lastResult$state$val !== void 0 ? _lastResult$state$val : {},\n    key: !initialized ? getDefaultKey(defaultValue) : _objectSpread2({\n      '': generateId()\n    }, getDefaultKey(defaultValue)),\n    // The `lastResult` should comes from the server which we won't expect the error to be null\n    // We can consider adding a warning if it happens\n    error: (_ref = lastResult === null || lastResult === void 0 ? void 0 : lastResult.error) !== null && _ref !== void 0 ? _ref : {}\n  };\n  handleIntent(result, lastResult === null || lastResult === void 0 ? void 0 : lastResult.intent, lastResult === null || lastResult === void 0 ? void 0 : lastResult.fields);\n  return result;\n}\nfunction getDefaultKey(defaultValue, prefix) {\n  return Object.entries(flatten(defaultValue, {\n    prefix\n  })).reduce((result, _ref2) => {\n    var [key, value] = _ref2;\n    if (Array.isArray(value)) {\n      for (var i = 0; i < value.length; i++) {\n        result[formatName(key, i)] = generateId();\n      }\n    }\n    return result;\n  }, {});\n}\nfunction setFieldsValidated(meta, fields) {\n  for (var _name of Object.keys(meta.error).concat(fields !== null && fields !== void 0 ? fields : [])) {\n    meta.validated[_name] = true;\n  }\n}\nfunction handleIntent(meta, intent, fields, initialized) {\n  var _fields$filter;\n  if (!intent) {\n    setFieldsValidated(meta, fields);\n    return;\n  }\n  switch (intent.type) {\n    case 'validate':\n      {\n        if (intent.payload.name) {\n          meta.validated[intent.payload.name] = true;\n        } else {\n          setFieldsValidated(meta, fields);\n        }\n        break;\n      }\n    case 'update':\n      {\n        var {\n          validated,\n          value\n        } = intent.payload;\n        var _name2 = formatName(intent.payload.name, intent.payload.index);\n        if (typeof value !== 'undefined') {\n          updateValue(meta, _name2 !== null && _name2 !== void 0 ? _name2 : '', value);\n        }\n        if (typeof validated !== 'undefined') {\n          // Clean up previous validated state\n          if (_name2) {\n            setState(meta.validated, _name2, () => undefined);\n          } else {\n            meta.validated = {};\n          }\n          if (validated) {\n            if (isPlainObject(value) || Array.isArray(value)) {\n              Object.assign(meta.validated, flatten(value, {\n                resolve() {\n                  return true;\n                },\n                prefix: _name2\n              }));\n            }\n            meta.validated[_name2 !== null && _name2 !== void 0 ? _name2 : ''] = true;\n          } else if (_name2) {\n            delete meta.validated[_name2];\n          }\n        }\n        break;\n      }\n    case 'reset':\n      {\n        var _name3 = formatName(intent.payload.name, intent.payload.index);\n        var _value = getValue(meta.defaultValue, _name3);\n        updateValue(meta, _name3, _value);\n        if (_name3) {\n          setState(meta.validated, _name3, () => undefined);\n          delete meta.validated[_name3];\n        } else {\n          meta.validated = {};\n        }\n        break;\n      }\n    case 'insert':\n    case 'remove':\n    case 'reorder':\n      {\n        if (initialized) {\n          meta.initialValue = clone(meta.initialValue);\n          meta.key = clone(meta.key);\n          setListState(meta.key, intent, defaultValue => {\n            if (!Array.isArray(defaultValue) && !isPlainObject(defaultValue)) {\n              return generateId();\n            }\n            return Object.assign(getDefaultKey(defaultValue), {\n              [root]: generateId()\n            });\n          });\n          setListValue(meta.initialValue, intent);\n        }\n        setListState(meta.validated, intent);\n        meta.validated[intent.payload.name] = true;\n        break;\n      }\n  }\n  var validatedFields = (_fields$filter = fields === null || fields === void 0 ? void 0 : fields.filter(name => meta.validated[name])) !== null && _fields$filter !== void 0 ? _fields$filter : [];\n  meta.error = Object.entries(meta.error).reduce((result, _ref3) => {\n    var [name, error] = _ref3;\n    if (meta.validated[name] || validatedFields.some(field => isPrefix(name, field))) {\n      result[name] = error;\n    }\n    return result;\n  }, {});\n}\nfunction updateValue(meta, name, value) {\n  if (name === '') {\n    meta.initialValue = value;\n    meta.value = value;\n    meta.key = _objectSpread2(_objectSpread2({}, getDefaultKey(value)), {}, {\n      '': generateId()\n    });\n    return;\n  }\n  meta.initialValue = clone(meta.initialValue);\n  meta.value = clone(meta.value);\n  meta.key = clone(meta.key);\n  setValue(meta.initialValue, name, () => value);\n  setValue(meta.value, name, () => value);\n  if (isPlainObject(value) || Array.isArray(value)) {\n    setState(meta.key, name, () => undefined);\n    Object.assign(meta.key, getDefaultKey(value, name));\n  }\n  meta.key[name] = generateId();\n}\nfunction createStateProxy(fn) {\n  var cache = {};\n  return new Proxy(cache, {\n    get(_, name, receiver) {\n      var _cache$name;\n      if (typeof name !== 'string') {\n        return;\n      }\n      return (_cache$name = cache[name]) !== null && _cache$name !== void 0 ? _cache$name : cache[name] = fn(name, receiver);\n    }\n  });\n}\nfunction createValueProxy(value) {\n  var val = normalize(value);\n  return createStateProxy((name, proxy) => {\n    if (name === '') {\n      return val;\n    }\n    var paths = getPaths(name);\n    var basename = formatPaths(paths.slice(0, -1));\n    var key = formatPaths(paths.slice(-1));\n    var parentValue = proxy[basename];\n    return getValue(parentValue, key);\n  });\n}\nfunction createConstraintProxy(constraint) {\n  return createStateProxy((name, proxy) => {\n    var _result;\n    var result = constraint[name];\n    if (!result) {\n      var paths = getPaths(name);\n      for (var i = paths.length - 1; i >= 0; i--) {\n        var path = paths[i];\n        if (typeof path === 'number' && !Number.isNaN(path)) {\n          paths[i] = Number.NaN;\n          break;\n        }\n      }\n      var alternative = formatPaths(paths);\n      if (name !== alternative) {\n        result = proxy[alternative];\n      }\n    }\n    return (_result = result) !== null && _result !== void 0 ? _result : {};\n  });\n}\nfunction createKeyProxy(key) {\n  return createStateProxy((name, proxy) => {\n    var currentKey = key[name];\n    var paths = getPaths(name);\n    if (paths.length === 0) {\n      return currentKey;\n    }\n    var parentKey = proxy[formatPaths(paths.slice(0, -1))];\n    if (typeof parentKey === 'undefined') {\n      return currentKey;\n    }\n    return \"\".concat(parentKey, \"/\").concat(currentKey !== null && currentKey !== void 0 ? currentKey : paths.at(-1));\n  });\n}\nfunction createValidProxy(error) {\n  return createStateProxy(name => {\n    var keys = Object.keys(error);\n    if (name === '') {\n      return keys.length === 0;\n    }\n    for (var key of keys) {\n      if (isPrefix(key, name) && typeof error[key] !== 'undefined') {\n        return false;\n      }\n    }\n    return true;\n  });\n}\nfunction createDirtyProxy(defaultValue, value, shouldDirtyConsider) {\n  return createStateProxy(name => JSON.stringify(defaultValue[name]) !== JSON.stringify(value[name], (key, value) => {\n    if (name === '' && key === '' && value) {\n      return Object.entries(value).reduce((result, _ref4) => {\n        var [name, value] = _ref4;\n        if (!shouldDirtyConsider(name)) {\n          return result;\n        }\n        return Object.assign(result !== null && result !== void 0 ? result : {}, {\n          [name]: value\n        });\n      }, undefined);\n    }\n    return value;\n  }));\n}\nfunction shouldNotify(prev, next, cache, scope) {\n  var compareFn = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : (prev, next) => JSON.stringify(prev) !== JSON.stringify(next);\n  if (scope && prev !== next) {\n    var _scope$prefix, _scope$name;\n    var prefixes = (_scope$prefix = scope.prefix) !== null && _scope$prefix !== void 0 ? _scope$prefix : [];\n    var names = (_scope$name = scope.name) !== null && _scope$name !== void 0 ? _scope$name : [];\n    var list = prefixes.length === 0 ? names : Array.from(new Set([...Object.keys(prev), ...Object.keys(next)]));\n    var _loop = function _loop(_name4) {\n        if (prefixes.length === 0 || names.includes(_name4) || prefixes.some(prefix => isPrefix(_name4, prefix))) {\n          var _cache$_name;\n          (_cache$_name = cache[_name4]) !== null && _cache$_name !== void 0 ? _cache$_name : cache[_name4] = compareFn(prev[_name4], next[_name4]);\n          if (cache[_name4]) {\n            return {\n              v: true\n            };\n          }\n        }\n      },\n      _ret;\n    for (var _name4 of list) {\n      _ret = _loop(_name4);\n      if (_ret) return _ret.v;\n    }\n  }\n  return false;\n}\nfunction createFormContext(options) {\n  var subscribers = [];\n  var latestOptions = options;\n  var meta = createFormMeta(options);\n  var state = createFormState(meta);\n  function getFormElement() {\n    return document.forms.namedItem(latestOptions.formId);\n  }\n  function createFormState(next) {\n    var prev = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : next;\n    var state = arguments.length > 2 ? arguments[2] : undefined;\n    var defaultValue = !state || prev.defaultValue !== next.defaultValue ? createValueProxy(next.defaultValue) : state.defaultValue;\n    var initialValue = next.initialValue === next.defaultValue ? defaultValue : !state || prev.initialValue !== next.initialValue ? createValueProxy(next.initialValue) : state.initialValue;\n    var value = next.value === next.initialValue ? initialValue : !state || prev.value !== next.value ? createValueProxy(next.value) : state.value;\n    return {\n      submissionStatus: next.submissionStatus,\n      defaultValue,\n      initialValue,\n      value,\n      error: !state || prev.error !== next.error ? next.error : state.error,\n      validated: next.validated,\n      constraint: !state || prev.constraint !== next.constraint ? createConstraintProxy(next.constraint) : state.constraint,\n      key: !state || prev.key !== next.key ? createKeyProxy(next.key) : state.key,\n      valid: !state || prev.error !== next.error ? createValidProxy(next.error) : state.valid,\n      dirty: !state || prev.defaultValue !== next.defaultValue || prev.value !== next.value ? createDirtyProxy(defaultValue, value, key => {\n        var _latestOptions$should, _latestOptions$should2;\n        return (_latestOptions$should = (_latestOptions$should2 = latestOptions.shouldDirtyConsider) === null || _latestOptions$should2 === void 0 ? void 0 : _latestOptions$should2.call(latestOptions, key)) !== null && _latestOptions$should !== void 0 ? _latestOptions$should : true;\n      }) : state.dirty\n    };\n  }\n  function updateFormMeta(nextMeta) {\n    var prevMeta = meta;\n    var prevState = state;\n    var nextState = createFormState(nextMeta, prevMeta, prevState);\n\n    // Apply change before notifying subscribers\n    meta = nextMeta;\n    state = nextState;\n    var cache = {\n      value: {},\n      error: {},\n      initialValue: {},\n      key: {},\n      valid: {},\n      dirty: {}\n    };\n    for (var subscriber of subscribers) {\n      var _subscriber$getSubjec;\n      var subject = (_subscriber$getSubjec = subscriber.getSubject) === null || _subscriber$getSubjec === void 0 ? void 0 : _subscriber$getSubjec.call(subscriber);\n      if (!subject || subject.formId && prevMeta.formId !== nextMeta.formId || subject.status && prevState.submissionStatus !== nextState.submissionStatus || shouldNotify(prevState.error, nextState.error, cache.error, subject.error) || shouldNotify(prevState.initialValue, nextState.initialValue, cache.initialValue, subject.initialValue) || shouldNotify(prevState.key, nextState.key, cache.key, subject.key, (prev, next) => prev !== next) || shouldNotify(prevState.valid, nextState.valid, cache.valid, subject.valid, compareBoolean) || shouldNotify(prevState.dirty, nextState.dirty, cache.dirty, subject.dirty, compareBoolean) || shouldNotify(prevState.value, nextState.value, cache.value, subject.value)) {\n        subscriber.callback();\n      }\n    }\n  }\n  function compareBoolean() {\n    var prev = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var next = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    return prev !== next;\n  }\n  function getSerializedState() {\n    return JSON.stringify({\n      validated: meta.validated\n    });\n  }\n  function submit(event) {\n    var form = event.target;\n    var submitter = event.submitter;\n    invariant(form === getFormElement(), \"The submit event is dispatched by form#\".concat(form.id, \" instead of form#\").concat(latestOptions.formId));\n    var formData = getFormData(form, submitter);\n    var result = {\n      formData,\n      action: getFormAction(event),\n      encType: getFormEncType(event),\n      method: getFormMethod(event)\n    };\n    if (typeof (latestOptions === null || latestOptions === void 0 ? void 0 : latestOptions.onValidate) === 'undefined') {\n      return result;\n    }\n    var submission = latestOptions.onValidate({\n      form,\n      formData,\n      submitter\n    });\n    if (submission.status === 'success' || submission.error !== null) {\n      var _result2 = submission.reply();\n      report(_objectSpread2(_objectSpread2({}, _result2), {}, {\n        status: _result2.status !== 'success' ? _result2.status : undefined\n      }));\n    }\n    return _objectSpread2(_objectSpread2({}, result), {}, {\n      submission\n    });\n  }\n  function resolveTarget(event) {\n    var form = getFormElement();\n    var element = event.target;\n    if (!form || !isFieldElement(element) || element.form !== form || !element.form.isConnected || element.name === '') {\n      return null;\n    }\n    return element;\n  }\n  function willValidate(element, eventName) {\n    var {\n      shouldValidate = 'onSubmit',\n      shouldRevalidate = shouldValidate\n    } = latestOptions;\n    var validated = meta.validated[element.name];\n    return validated ? shouldRevalidate === eventName && (eventName === 'onInput' || meta.isValueUpdated) : shouldValidate === eventName;\n  }\n  function updateFormValue(form) {\n    var formData = new FormData(form);\n    var result = getSubmissionContext(formData);\n    updateFormMeta(_objectSpread2(_objectSpread2({}, meta), {}, {\n      isValueUpdated: true,\n      value: result.payload\n    }));\n  }\n  function onInput(event) {\n    var element = resolveTarget(event);\n    if (!element || !element.form) {\n      return;\n    }\n    if (event.defaultPrevented || !willValidate(element, 'onInput')) {\n      updateFormValue(element.form);\n    } else {\n      dispatch({\n        type: 'validate',\n        payload: {\n          name: element.name\n        }\n      });\n    }\n  }\n  function onBlur(event) {\n    var element = resolveTarget(event);\n    if (!element || event.defaultPrevented || !willValidate(element, 'onBlur')) {\n      return;\n    }\n    dispatch({\n      type: 'validate',\n      payload: {\n        name: element.name\n      }\n    });\n  }\n  function reset() {\n    updateFormMeta(createFormMeta(latestOptions, true));\n  }\n  function onReset(event) {\n    var element = getFormElement();\n    if (event.type !== 'reset' || event.target !== element || event.defaultPrevented) {\n      return;\n    }\n    reset();\n  }\n  function report(result) {\n    var _result$error, _result$state;\n    var formElement = getFormElement();\n    if (!result.initialValue) {\n      reset();\n      return;\n    }\n    var error = Object.entries((_result$error = result.error) !== null && _result$error !== void 0 ? _result$error : {}).reduce((result, _ref5) => {\n      var [name, newError] = _ref5;\n      var error = newError === null ? meta.error[name] : newError;\n      if (error) {\n        result[name] = error;\n      }\n      return result;\n    }, {});\n    var update = _objectSpread2(_objectSpread2({}, meta), {}, {\n      isValueUpdated: false,\n      submissionStatus: result.status,\n      value: result.initialValue,\n      validated: _objectSpread2(_objectSpread2({}, meta.validated), (_result$state = result.state) === null || _result$state === void 0 ? void 0 : _result$state.validated),\n      error\n    });\n    handleIntent(update, result.intent, result.fields, true);\n    updateFormMeta(update);\n    if (formElement && result.status === 'error') {\n      for (var element of formElement.elements) {\n        if (isFieldElement(element) && meta.error[element.name]) {\n          element.focus();\n          break;\n        }\n      }\n    }\n  }\n  function onUpdate(options) {\n    var currentFormId = latestOptions.formId;\n    var currentResult = latestOptions.lastResult;\n\n    // Merge new options with the latest options\n    Object.assign(latestOptions, options);\n    if (latestOptions.formId !== currentFormId) {\n      reset();\n    } else if (options.lastResult && options.lastResult !== currentResult) {\n      report(options.lastResult);\n    }\n  }\n  function subscribe(callback, getSubject) {\n    var subscriber = {\n      callback,\n      getSubject\n    };\n    subscribers.push(subscriber);\n    return () => {\n      subscribers = subscribers.filter(current => current !== subscriber);\n    };\n  }\n  function getState() {\n    return state;\n  }\n  function dispatch(intent) {\n    var form = getFormElement();\n    var submitter = document.createElement('button');\n    var buttonProps = getControlButtonProps(intent);\n    submitter.name = buttonProps.name;\n    submitter.value = buttonProps.value;\n    submitter.hidden = true;\n    submitter.formNoValidate = true;\n    form === null || form === void 0 || form.appendChild(submitter);\n    requestSubmit(form, submitter);\n    form === null || form === void 0 || form.removeChild(submitter);\n  }\n  function getControlButtonProps(intent) {\n    return {\n      name: INTENT,\n      value: serializeIntent(intent),\n      form: latestOptions.formId,\n      formNoValidate: true\n    };\n  }\n  function createFormControl(type) {\n    var control = function control() {\n      var payload = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return dispatch({\n        type,\n        payload\n      });\n    };\n    return Object.assign(control, {\n      getButtonProps() {\n        var payload = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return getControlButtonProps({\n          type,\n          payload\n        });\n      }\n    });\n  }\n  function observe() {\n    var observer = new MutationObserver(mutations => {\n      var form = getFormElement();\n      if (!form) {\n        return;\n      }\n      for (var mutation of mutations) {\n        var nodes = mutation.type === 'childList' ? [...mutation.addedNodes, ...mutation.removedNodes] : [mutation.target];\n        for (var node of nodes) {\n          var element = isFieldElement(node) ? node : node instanceof HTMLElement ? node.querySelector('input,select,textarea') : null;\n          if ((element === null || element === void 0 ? void 0 : element.form) === form) {\n            updateFormValue(form);\n            return;\n          }\n        }\n      }\n    });\n    observer.observe(document, {\n      subtree: true,\n      childList: true,\n      attributes: true,\n      attributeFilter: ['form', 'name']\n    });\n    return () => {\n      observer.disconnect();\n    };\n  }\n  return {\n    getFormId() {\n      return meta.formId;\n    },\n    submit,\n    onReset,\n    onInput,\n    onBlur,\n    onUpdate,\n    validate: createFormControl('validate'),\n    reset: createFormControl('reset'),\n    update: createFormControl('update'),\n    insert: createFormControl('insert'),\n    remove: createFormControl('remove'),\n    reorder: createFormControl('reorder'),\n    subscribe,\n    getState,\n    getSerializedState,\n    observe\n  };\n}\n\nexport { createFormContext };\n","function ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nexport { _defineProperty as defineProperty, _objectSpread2 as objectSpread2, _objectWithoutProperties as objectWithoutProperties, _objectWithoutPropertiesLoose as objectWithoutPropertiesLoose, _toPrimitive as toPrimitive, _toPropertyKey as toPropertyKey };\n","import { objectWithoutProperties as _objectWithoutProperties, objectSpread2 as _objectSpread2 } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport { STATE, formatPaths, getPaths, unstable_createFormContext, INTENT, isPrefix } from '@conform-to/dom';\nimport { useContext, useMemo, createContext, useCallback, useSyncExternalStore, useRef } from 'react';\nimport { jsx } from 'react/jsx-runtime';\n\nvar _excluded = [\"onSubmit\"];\nvar Form = /*#__PURE__*/createContext([]);\n\n// To hide the FormContext type from the public API\nvar wrappedSymbol = Symbol('wrapped');\nfunction getWrappedFormContext(context) {\n  return context[wrappedSymbol];\n}\nfunction useFormContext(formId) {\n  var contexts = useContext(Form);\n  var form = formId ? contexts.find(context => formId === context.getFormId()) : contexts[0];\n  if (!form) {\n    throw new Error('Form context is not available');\n  }\n  return form;\n}\nfunction useFormState(form, subjectRef) {\n  var subscribe = useCallback(callback => form.subscribe(callback, () => subjectRef === null || subjectRef === void 0 ? void 0 : subjectRef.current), [form, subjectRef]);\n  return useSyncExternalStore(subscribe, form.getState, form.getState);\n}\nfunction FormProvider(props) {\n  var forms = useContext(Form);\n  var context = getWrappedFormContext(props.context);\n  var value = useMemo(() => [context].concat(forms),\n  // Put the latest form context first\n  [forms, context]);\n  return /*#__PURE__*/jsx(Form.Provider, {\n    value: value,\n    children: props.children\n  });\n}\nfunction FormStateInput(props) {\n  var context = useFormContext(props.formId);\n  return /*#__PURE__*/jsx(\"input\", {\n    type: \"hidden\",\n    name: STATE,\n    value: context.getSerializedState(),\n    form: props.formId\n  });\n}\nfunction useSubjectRef() {\n  var initialSubject = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var subjectRef = useRef(initialSubject);\n\n  // Reset the subject everytime the component is rerendered\n  // This let us subscribe to data used in the last render only\n  subjectRef.current = initialSubject;\n  return subjectRef;\n}\nfunction updateSubjectRef(ref, subject, scope, name) {\n  if (subject === 'status' || subject === 'formId') {\n    ref.current[subject] = true;\n  } else if (typeof scope !== 'undefined' && typeof name !== 'undefined') {\n    var _ref$current$subject$, _ref$current$subject;\n    ref.current[subject] = _objectSpread2(_objectSpread2({}, ref.current[subject]), {}, {\n      [scope]: ((_ref$current$subject$ = (_ref$current$subject = ref.current[subject]) === null || _ref$current$subject === void 0 ? void 0 : _ref$current$subject[scope]) !== null && _ref$current$subject$ !== void 0 ? _ref$current$subject$ : []).concat(name)\n    });\n  }\n}\nfunction getMetadata(context, subjectRef, stateSnapshot) {\n  var name = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n  var id = name ? \"\".concat(context.getFormId(), \"-\").concat(name) : context.getFormId();\n  var state = context.getState();\n  return new Proxy({\n    id,\n    name,\n    errorId: \"\".concat(id, \"-error\"),\n    descriptionId: \"\".concat(id, \"-description\"),\n    get initialValue() {\n      return state.initialValue[name];\n    },\n    get value() {\n      return state.value[name];\n    },\n    get errors() {\n      return state.error[name];\n    },\n    get key() {\n      return state.key[name];\n    },\n    get valid() {\n      return state.valid[name];\n    },\n    get dirty() {\n      return state.dirty[name];\n    },\n    get allErrors() {\n      if (name === '') {\n        return state.error;\n      }\n      var result = {};\n      for (var [key, error] of Object.entries(state.error)) {\n        if (isPrefix(key, name)) {\n          result[key] = error;\n        }\n      }\n      return result;\n    },\n    get getFieldset() {\n      return () => new Proxy({}, {\n        get(target, key, receiver) {\n          if (typeof key === 'string') {\n            return getFieldMetadata(context, subjectRef, stateSnapshot, name, key);\n          }\n          return Reflect.get(target, key, receiver);\n        }\n      });\n    }\n  }, {\n    get(target, key, receiver) {\n      // We want to minize re-render by identifying whether the field is used in a callback only\n      // but there is no clear way to know if it is accessed during render or not\n      // if the stateSnapshot is not the latest, then it must be accessed in a callback\n      if (state === stateSnapshot) {\n        switch (key) {\n          case 'id':\n          case 'errorId':\n          case 'descriptionId':\n            updateSubjectRef(subjectRef, 'formId');\n            break;\n          case 'key':\n          case 'initialValue':\n          case 'value':\n          case 'valid':\n          case 'dirty':\n            updateSubjectRef(subjectRef, key, 'name', name);\n            break;\n          case 'errors':\n          case 'allErrors':\n            updateSubjectRef(subjectRef, 'error', key === 'errors' ? 'name' : 'prefix', name);\n            break;\n        }\n      }\n      return Reflect.get(target, key, receiver);\n    }\n  });\n}\nfunction getFieldMetadata(context, subjectRef, stateSnapshot) {\n  var prefix = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n  var key = arguments.length > 4 ? arguments[4] : undefined;\n  var name = typeof key === 'undefined' ? prefix : formatPaths([...getPaths(prefix), key]);\n  return new Proxy({}, {\n    get(_, key, receiver) {\n      var _state$constraint$nam;\n      var metadata = getMetadata(context, subjectRef, stateSnapshot, name);\n      var state = context.getState();\n      switch (key) {\n        case 'formId':\n          if (state === stateSnapshot) {\n            updateSubjectRef(subjectRef, 'formId');\n          }\n          return context.getFormId();\n        case 'required':\n        case 'minLength':\n        case 'maxLength':\n        case 'min':\n        case 'max':\n        case 'pattern':\n        case 'step':\n        case 'multiple':\n          return (_state$constraint$nam = state.constraint[name]) === null || _state$constraint$nam === void 0 ? void 0 : _state$constraint$nam[key];\n        case 'getFieldList':\n          {\n            return () => {\n              var _state$initialValue$n;\n              var initialValue = (_state$initialValue$n = state.initialValue[name]) !== null && _state$initialValue$n !== void 0 ? _state$initialValue$n : [];\n              if (state === stateSnapshot) {\n                updateSubjectRef(subjectRef, 'initialValue', 'name', name);\n              }\n              if (!Array.isArray(initialValue)) {\n                throw new Error('The initial value at the given name is not a list');\n              }\n              return Array(initialValue.length).fill(0).map((_, index) => getFieldMetadata(context, subjectRef, stateSnapshot, name, index));\n            };\n          }\n      }\n      return Reflect.get(metadata, key, receiver);\n    }\n  });\n}\nfunction getFormMetadata(context, subjectRef, stateSnapshot, noValidate) {\n  return new Proxy({}, {\n    get(_, key, receiver) {\n      var metadata = getMetadata(context, subjectRef, stateSnapshot);\n      var state = context.getState();\n      switch (key) {\n        case 'context':\n          return {\n            [wrappedSymbol]: context\n          };\n        case 'status':\n          if (state === stateSnapshot) {\n            updateSubjectRef(subjectRef, 'status');\n          }\n          return state.submissionStatus;\n        case 'validate':\n        case 'update':\n        case 'reset':\n        case 'insert':\n        case 'remove':\n        case 'reorder':\n          return context[key];\n        case 'onSubmit':\n          return context.submit;\n        case 'noValidate':\n          return noValidate;\n      }\n      return Reflect.get(metadata, key, receiver);\n    }\n  });\n}\nfunction createFormContext(options) {\n  var {\n      onSubmit\n    } = options,\n    rest = _objectWithoutProperties(options, _excluded);\n  var context = unstable_createFormContext(rest);\n  return _objectSpread2(_objectSpread2({}, context), {}, {\n    submit(event) {\n      var submitEvent = event.nativeEvent;\n      var result = context.submit(submitEvent);\n      if (!result.submission || result.submission.status === 'success' || result.submission.error === null) {\n        if (!result.formData.has(INTENT)) {\n          var _onSubmit;\n          (_onSubmit = onSubmit) === null || _onSubmit === void 0 || _onSubmit(event, result);\n        }\n      } else {\n        event.preventDefault();\n      }\n    },\n    onUpdate(options) {\n      onSubmit = options.onSubmit;\n      context.onUpdate(options);\n    }\n  });\n}\n\nexport { Form, FormProvider, FormStateInput, createFormContext, getFieldMetadata, getFormMetadata, getMetadata, getWrappedFormContext, updateSubjectRef, useFormContext, useFormState, useSubjectRef };\n","import { objectWithoutProperties as _objectWithoutProperties, objectSpread2 as _objectSpread2 } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport { useState, useEffect, useLayoutEffect, useId } from 'react';\nimport { createFormContext, useSubjectRef, useFormState, getFormMetadata, useFormContext, getFieldMetadata } from './context.mjs';\n\nvar _excluded = [\"id\"];\n\n/**\n * useLayoutEffect is client-only.\n * This basically makes it a no-op on server\n */\nvar useSafeLayoutEffect = typeof document === 'undefined' ? useEffect : useLayoutEffect;\nfunction useFormId(preferredId) {\n  var id = useId();\n  return preferredId !== null && preferredId !== void 0 ? preferredId : id;\n}\nfunction useNoValidate() {\n  var defaultNoValidate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  var [noValidate, setNoValidate] = useState(defaultNoValidate);\n  useSafeLayoutEffect(() => {\n    // This is necessary to fix an issue in strict mode with related to our proxy setup\n    // It avoids the component from being rerendered without re-rendering the child\n    // Which reset the proxy but failed to capture its usage within child component\n    if (!noValidate) {\n      setNoValidate(true);\n    }\n  }, [noValidate]);\n  return noValidate;\n}\nfunction useForm(options) {\n  var {\n      id\n    } = options,\n    formConfig = _objectWithoutProperties(options, _excluded);\n  var formId = useFormId(id);\n  var [context] = useState(() => createFormContext(_objectSpread2(_objectSpread2({}, formConfig), {}, {\n    formId\n  })));\n  useSafeLayoutEffect(() => {\n    var disconnect = context.observe();\n    document.addEventListener('input', context.onInput);\n    document.addEventListener('focusout', context.onBlur);\n    document.addEventListener('reset', context.onReset);\n    return () => {\n      disconnect();\n      document.removeEventListener('input', context.onInput);\n      document.removeEventListener('focusout', context.onBlur);\n      document.removeEventListener('reset', context.onReset);\n    };\n  }, [context]);\n  useSafeLayoutEffect(() => {\n    context.onUpdate(_objectSpread2(_objectSpread2({}, formConfig), {}, {\n      formId\n    }));\n  });\n  var subjectRef = useSubjectRef();\n  var stateSnapshot = useFormState(context, subjectRef);\n  var noValidate = useNoValidate(options.defaultNoValidate);\n  var form = getFormMetadata(context, subjectRef, stateSnapshot, noValidate);\n  return [form, form.getFieldset()];\n}\nfunction useFormMetadata(formId) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var subjectRef = useSubjectRef();\n  var context = useFormContext(formId);\n  var stateSnapshot = useFormState(context, subjectRef);\n  var noValidate = useNoValidate(options.defaultNoValidate);\n  return getFormMetadata(context, subjectRef, stateSnapshot, noValidate);\n}\nfunction useField(name) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var subjectRef = useSubjectRef();\n  var context = useFormContext(options.formId);\n  var stateSnapshot = useFormState(context, subjectRef);\n  var field = getFieldMetadata(context, subjectRef, stateSnapshot, name);\n  var form = getFormMetadata(context, subjectRef, stateSnapshot, false);\n  return [field, form];\n}\n\nexport { useField, useForm, useFormId, useFormMetadata, useNoValidate, useSafeLayoutEffect };\n","import { objectSpread2 as _objectSpread2 } from './_virtual/_rollupPluginBabelHelpers.mjs';\n\n/**\n * Cleanup `undefined` from the result.\n * To minimize conflicts when merging with user defined props\n */\nfunction simplify(props) {\n  for (var key in props) {\n    if (props[key] === undefined) {\n      delete props[key];\n    }\n  }\n  return props;\n}\n\n/**\n * Derives aria attributes of a form control based on the field metadata.\n */\nfunction getAriaAttributes(metadata) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (typeof options.ariaAttributes !== 'undefined' && !options.ariaAttributes) {\n    return {};\n  }\n  var invalid = options.ariaInvalid === 'allErrors' ? !metadata.valid : typeof metadata.errors !== 'undefined';\n  var ariaDescribedBy = options.ariaDescribedBy;\n  return simplify({\n    'aria-invalid': invalid || undefined,\n    'aria-describedby': invalid ? \"\".concat(metadata.errorId, \" \").concat(ariaDescribedBy !== null && ariaDescribedBy !== void 0 ? ariaDescribedBy : '').trim() : ariaDescribedBy\n  });\n}\n\n/**\n * Derives the properties of a form element based on the form metadata,\n * including `id`, `onSubmit`, `noValidate`, `aria-invalid` and `aria-describedby`.\n *\n * @example\n * ```tsx\n * <form {...getFormProps(metadata)} />\n * ```\n */\nfunction getFormProps(metadata, options) {\n  return simplify(_objectSpread2({\n    id: metadata.id,\n    onSubmit: metadata.onSubmit,\n    noValidate: metadata.noValidate\n  }, getAriaAttributes(metadata, options)));\n}\n\n/**\n * Derives the properties of a fieldset element based on the field metadata,\n * including `id`, `name`, `form`, `aria-invalid` and `aria-describedby`.\n *\n * @example\n * ```tsx\n * <fieldset {...getFieldsetProps(metadata)} />\n * ```\n */\nfunction getFieldsetProps(metadata, options) {\n  return simplify(_objectSpread2({\n    id: metadata.id,\n    name: metadata.name,\n    form: metadata.formId\n  }, getAriaAttributes(metadata, options)));\n}\n\n/**\n * Derives common properties of a form control based on the field metadata,\n * including `key`, `id`, `name`, `form`, `required`, `autoFocus`, `aria-invalid` and `aria-describedby`.\n */\nfunction getFormControlProps(metadata, options) {\n  return simplify(_objectSpread2({\n    key: metadata.key,\n    required: metadata.required || undefined\n  }, getFieldsetProps(metadata, options)));\n}\n\n/**\n * Derives the properties of an input element based on the field metadata,\n * including common form control attributes like `key`, `id`, `name`, `form`, `autoFocus`, `aria-invalid`, `aria-describedby`\n * and constraint attributes such as `type`, `required`, `minLength`, `maxLength`, `min`, `max`, `step`, `pattern`, `multiple`.\n * Depends on the provided options, it will also set `defaultChecked` / `checked` if it is a checkbox or radio button,\n * or otherwise `defaultValue` / `value`.\n *\n * @see https://conform.guide/api/react/getInputProps\n * @example\n * ```tsx\n * // To setup an uncontrolled input\n * <input {...getInputProps(metadata, { type: 'text' })} />\n * // To setup an uncontrolled checkbox\n * <input {...getInputProps(metadata, { type: 'checkbox' })} />\n * // To setup an input without defaultValue\n * <input {...getInputProps(metadata, { value: false })} />\n * // To setup a radio button without defaultChecked state\n * <input {...getInputProps(metadata, { type: 'radio', value: false })} />\n * ```\n */\nfunction getInputProps(metadata, options) {\n  var props = _objectSpread2(_objectSpread2({}, getFormControlProps(metadata, options)), {}, {\n    type: options.type,\n    minLength: metadata.minLength,\n    maxLength: metadata.maxLength,\n    min: metadata.min,\n    max: metadata.max,\n    step: metadata.step,\n    pattern: metadata.pattern,\n    multiple: metadata.multiple\n  });\n  if (typeof options.value === 'undefined' || options.value) {\n    if (options.type === 'checkbox' || options.type === 'radio') {\n      props.value = typeof options.value === 'string' ? options.value : 'on';\n      props.defaultChecked = Array.isArray(metadata.initialValue) ? metadata.initialValue.includes(options.value) : metadata.initialValue === props.value;\n    } else if (typeof metadata.initialValue === 'string') {\n      props.defaultValue = metadata.initialValue;\n    }\n  }\n  return simplify(props);\n}\n\n/**\n * Derives the properties of a select element based on the field metadata,\n * including common form control attributes like `key`, `id`, `name`, `form`, `autoFocus`, `aria-invalid`, `aria-describedby`\n * and constraint attributes such as `required` or `multiple`.\n * Depends on the provided options, it will also set `defaultValue` / `value`.\n *\n * @see https://conform.guide/api/react/getSelectProps\n * @example\n * ```tsx\n * // To setup an uncontrolled select\n * <select {...getSelectProps(metadata)} />\n * // To setup a select without defaultValue\n * <select {...getSelectProps(metadata, { value: false })} />\n * ```\n */\nfunction getSelectProps(metadata) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var props = _objectSpread2(_objectSpread2({}, getFormControlProps(metadata, options)), {}, {\n    multiple: metadata.multiple\n  });\n  if (typeof options.value === 'undefined' || options.value) {\n    var _metadata$initialValu;\n    props.defaultValue = Array.isArray(metadata.initialValue) ? metadata.initialValue.map(item => \"\".concat(item !== null && item !== void 0 ? item : '')) : (_metadata$initialValu = metadata.initialValue) === null || _metadata$initialValu === void 0 ? void 0 : _metadata$initialValu.toString();\n  }\n  return simplify(props);\n}\n\n/**\n * Derives the properties of a textarea element based on the field metadata,\n * including common form control attributes like `key`, `id`, `name`, `form`, `autoFocus`, `aria-invalid`, `aria-describedby`\n * and constraint attributes such as `required`, `minLength` or `maxLength`.\n * Depends on the provided options, it will also set `defaultValue` / `value`.\n *\n * @see https://conform.guide/api/react/getTextareaProps\n * @example\n * ```tsx\n * // To setup an uncontrolled textarea\n * <textarea {...getTextareaProps(metadata)} />\n * // To setup a textarea without defaultValue\n * <textarea {...getTextareaProps(metadata, { value: false })} />\n * ```\n */\nfunction getTextareaProps(metadata) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var props = _objectSpread2(_objectSpread2({}, getFormControlProps(metadata, options)), {}, {\n    minLength: metadata.minLength,\n    maxLength: metadata.maxLength\n  });\n  if (typeof options.value === 'undefined' || options.value) {\n    var _metadata$initialValu2;\n    props.defaultValue = (_metadata$initialValu2 = metadata.initialValue) === null || _metadata$initialValu2 === void 0 ? void 0 : _metadata$initialValu2.toString();\n  }\n  return simplify(props);\n}\n\n/**\n * Derives the properties of a collection of checkboxes or radio buttons based on the field metadata,\n * including common form control attributes like `key`, `id`, `name`, `form`, `autoFocus`, `aria-invalid`, `aria-describedby` and `required`.\n *\n * @see https://conform.guide/api/react/getCollectionProps\n * @example\n * ```tsx\n * <fieldset>\n *   {getCollectionProps(metadata, {\n *     type: 'checkbox',\n *     options: ['a', 'b', 'c']\n *   }).map((props) => (\n *     <div key={props.key}>\n *       <label htmlFor={props.id}>{props.value}</label>\n *       <input {...props} />\n *     </div>\n *  ))}\n * </fieldset>\n * ```\n */\nfunction getCollectionProps(metadata, options) {\n  return options.options.map(value => {\n    var _metadata$key;\n    return simplify(_objectSpread2(_objectSpread2({}, getFormControlProps(metadata, options)), {}, {\n      key: \"\".concat((_metadata$key = metadata.key) !== null && _metadata$key !== void 0 ? _metadata$key : '').concat(value),\n      id: \"\".concat(metadata.id, \"-\").concat(value),\n      type: options.type,\n      value,\n      defaultChecked: typeof options.value === 'undefined' || options.value ? options.type === 'checkbox' && Array.isArray(metadata.initialValue) ? metadata.initialValue.includes(value) : metadata.initialValue === value : undefined,\n      // The required attribute doesn't make sense for checkbox group\n      // As it would require all checkboxes to be checked instead of at least one\n      // It is overriden with `undefiend` so it could be cleaned up properly\n      required: options.type === 'checkbox' ? undefined : metadata.required\n    }));\n  });\n}\n\nexport { getAriaAttributes, getCollectionProps, getFieldsetProps, getFormControlProps, getFormProps, getInputProps, getSelectProps, getTextareaProps };\n"],"names":["ownKeys","e","r","o","_objectSpread2","_defineProperty","obj","key","value","_toPropertyKey","_toPrimitive","input","hint","prim","res","arg","getFormData","form","submitter","payload","entries","getPaths","name","result","segment","index","formatPaths","paths","path","formatName","prefix","isPrefix","prefixPaths","setValue","target","valueFn","length","lastIndex","pointer","nextKey","newValue","getValue","isPlainObject","isFile","normalize","acceptFile","data","item","flatten","_options$resolve","options","resolve","process","i","_value","_options$prefix","invariant","expectedCondition","message","generateId","clone","isFormControl","element","isFieldElement","getFormAction","event","_ref","_submitter$getAttribu","getFormEncType","_submitter$getAttribu2","encType","getFormMethod","_ref2","_submitter$getAttribu3","method","requestSubmit","INTENT","STATE","getSubmissionContext","body","intent","state","context","getIntent","_loop","next","prev","parse","_name","setListValue","mergeResolveResult","resolved","createSubmission","replySubmission","_context$intent","_context$intent$paylo","_options$formErrors","_normalize","_value2","extraError","error","serializedIntent","control","serializeIntent","serialize","updateList","list","_intent$payload$index","root","setState","keys","_loop2","currentValue","_data$root","setListState","getDefaultValue","defaultValue","createFormMeta","initialized","_lastResult$initialVa","_options$constraint","_lastResult$state$val","_lastResult$state","lastResult","initialValue","getDefaultKey","handleIntent","setFieldsValidated","meta","fields","_fields$filter","validated","_name2","updateValue","_name3","validatedFields","_ref3","field","createStateProxy","fn","cache","_","receiver","_cache$name","createValueProxy","val","proxy","basename","parentValue","createConstraintProxy","constraint","_result","alternative","createKeyProxy","currentKey","parentKey","createValidProxy","createDirtyProxy","shouldDirtyConsider","_ref4","shouldNotify","scope","compareFn","_scope$prefix","_scope$name","prefixes","names","_name4","_cache$_name","_ret","createFormContext","subscribers","latestOptions","createFormState","getFormElement","_latestOptions$should","_latestOptions$should2","updateFormMeta","nextMeta","prevMeta","prevState","nextState","subscriber","_subscriber$getSubjec","subject","compareBoolean","getSerializedState","submit","formData","submission","_result2","report","resolveTarget","willValidate","eventName","shouldValidate","shouldRevalidate","updateFormValue","onInput","dispatch","onBlur","reset","onReset","_result$error","_result$state","formElement","_ref5","newError","update","onUpdate","currentFormId","currentResult","subscribe","callback","getSubject","current","getState","buttonProps","getControlButtonProps","createFormControl","type","observe","observer","mutations","mutation","nodes","node","_objectWithoutPropertiesLoose","source","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","_excluded","Form","createContext","wrappedSymbol","getWrappedFormContext","useFormState","subjectRef","useCallback","useSyncExternalStore","FormProvider","props","forms","useContext","useMemo","jsx","useSubjectRef","initialSubject","useRef","updateSubjectRef","ref","_ref$current$subject$","_ref$current$subject","getMetadata","stateSnapshot","id","getFieldMetadata","_state$constraint$nam","metadata","_state$initialValue$n","getFormMetadata","noValidate","onSubmit","rest","unstable_createFormContext","submitEvent","_onSubmit","useSafeLayoutEffect","useEffect","useLayoutEffect","useFormId","preferredId","useId","useNoValidate","defaultNoValidate","setNoValidate","useState","useForm","formConfig","formId","disconnect","simplify","getAriaAttributes","invalid","ariaDescribedBy","getFormProps","getFieldsetProps","getFormControlProps","getInputProps","getTextareaProps","_metadata$initialValu2"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}