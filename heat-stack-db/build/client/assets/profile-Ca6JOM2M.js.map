{"version":3,"file":"profile-Ca6JOM2M.js","sources":["../../../app/routes/settings+/profile.tsx"],"sourcesContent":["import { invariantResponse } from '@epic-web/invariant'\nimport { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport { json, type LoaderFunctionArgs } from '@remix-run/node'\nimport { Link, Outlet, useMatches } from '@remix-run/react'\nimport { z } from 'zod'\nimport { Spacer } from '#app/components/spacer.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { cn } from '#app/utils/misc.tsx'\nimport { useUser } from '#app/utils/user.ts'\n\nexport const BreadcrumbHandle = z.object({ breadcrumb: z.any() })\nexport type BreadcrumbHandle = z.infer<typeof BreadcrumbHandle>\n\nexport const handle: BreadcrumbHandle & SEOHandle = {\n\tbreadcrumb: <Icon name=\"file-text\">Edit Profile</Icon>,\n\tgetSitemapEntries: () => null,\n}\n\nexport async function loader({ request }: LoaderFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst user = await prisma.user.findUnique({\n\t\twhere: { id: userId },\n\t\tselect: { username: true },\n\t})\n\tinvariantResponse(user, 'User not found', { status: 404 })\n\treturn json({})\n}\n\nconst BreadcrumbHandleMatch = z.object({\n\thandle: BreadcrumbHandle,\n})\n\nexport default function EditUserProfile() {\n\tconst user = useUser()\n\tconst matches = useMatches()\n\tconst breadcrumbs = matches\n\t\t.map(m => {\n\t\t\tconst result = BreadcrumbHandleMatch.safeParse(m)\n\t\t\tif (!result.success || !result.data.handle.breadcrumb) return null\n\t\t\treturn (\n\t\t\t\t<Link key={m.id} to={m.pathname} className=\"flex items-center\">\n\t\t\t\t\t{result.data.handle.breadcrumb}\n\t\t\t\t</Link>\n\t\t\t)\n\t\t})\n\t\t.filter(Boolean)\n\n\treturn (\n\t\t<div className=\"m-auto mb-24 mt-16 max-w-3xl\">\n\t\t\t<div className=\"container\">\n\t\t\t\t<ul className=\"flex gap-3\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tclassName=\"text-muted-foreground\"\n\t\t\t\t\t\t\tto={`/users/${user.username}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tProfile\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t{breadcrumbs.map((breadcrumb, i, arr) => (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tclassName={cn('flex items-center gap-3', {\n\t\t\t\t\t\t\t\t'text-muted-foreground': i < arr.length - 1,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t▶️ {breadcrumb}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<Spacer size=\"xs\" />\n\t\t\t<main className=\"mx-auto bg-muted px-6 py-8 md:container md:rounded-3xl\">\n\t\t\t\t<Outlet />\n\t\t\t</main>\n\t\t</div>\n\t)\n}\n"],"names":["BreadcrumbHandle","z","object","breadcrumb","any","handle","jsx","Icon","name","children","getSitemapEntries","BreadcrumbHandleMatch","EditUserProfile","user","useUser","breadcrumbs","useMatches","map","m","result","safeParse","success","data","Link","to","pathname","className","id","filter","Boolean","jsxs","username","i","arr","cn","length","Spacer","size","Outlet"],"mappings":"gVAYa,MAAAA,EAAmBC,EAAEC,OAAO,CAAEC,WAAYF,EAAEG,IAAI,CAAE,CAAC,EAGnDC,EAAuC,CACnDF,WAAYG,EAAA,IAACC,EAAK,CAAAC,KAAK,YAAYC,SAAY,cAAA,CAAA,EAC/CC,kBAAmBA,IAAM,IAC1B,EAYMC,EAAwBV,EAAEC,OAAO,CACtCG,OAAQL,CACT,CAAC,EAED,SAAwBY,GAAkB,CACzC,MAAMC,EAAOC,IAEPC,EADUC,IAEdC,IAASC,GAAA,CACH,MAAAC,EAASR,EAAsBS,UAAUF,CAAC,EAChD,MAAI,CAACC,EAAOE,SAAW,CAACF,EAAOG,KAAKjB,OAAOF,WAAmB,KAE5DG,EAAAA,IAAAiB,EAAA,CAAgBC,GAAIN,EAAEO,SAAUC,UAAU,oBACzCjB,SAAAU,EAAOG,KAAKjB,OAAOF,UADV,EAAAe,EAAES,EAEb,CAEF,CAAC,EACAC,OAAOC,OAAO,EAGf,OAAAC,EAAAA,KAAC,MAAI,CAAAJ,UAAU,+BACdjB,SAAA,CAAAH,EAAA,IAAC,OAAIoB,UAAU,YACdjB,SAACqB,EAAA,KAAA,KAAA,CAAGJ,UAAU,aACbjB,SAAA,CAAAH,EAAA,IAAC,KACA,CAAAG,SAAAH,EAAA,IAACiB,EAAA,CACAG,UAAU,wBACVF,GAAI,UAAUX,EAAKkB,QAAQ,GAC3BtB,SAAA,UAED,CACD,CAAA,EACCM,EAAYE,IAAI,CAACd,EAAY6B,EAAGC,IAChCH,EAAA,KAAC,KAAA,CAEAJ,UAAWQ,EAAG,0BAA2B,CACxC,wBAAyBF,EAAIC,EAAIE,OAAS,CAC3C,CAAC,EACD1B,SAAA,CAAA,MACIN,CAAA,GALC6B,CAMN,CACA,CAAA,EACF,CACD,CAAA,EACA1B,EAAA,IAAC8B,EAAO,CAAAC,KAAK,IAAK,CAAA,QACjB,OAAK,CAAAX,UAAU,yDACfjB,SAAAH,EAAAA,IAACgC,IAAO,CACT,CAAA,CAAA,CACD,CAAA,CAEF"}