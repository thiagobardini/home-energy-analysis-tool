{"version":3,"file":"notes-d9d4KKiV.js","sources":["../../../app/routes/users+/$username_+/notes.tsx"],"sourcesContent":["import { invariantResponse } from '@epic-web/invariant'\nimport { json, type LoaderFunctionArgs } from '@remix-run/node'\nimport { Link, NavLink, Outlet, useLoaderData } from '@remix-run/react'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { cn, getUserImgSrc } from '#app/utils/misc.tsx'\nimport { useOptionalUser } from '#app/utils/user.ts'\n\nexport async function loader({ params }: LoaderFunctionArgs) {\n\tconst owner = await prisma.user.findFirst({\n\t\tselect: {\n\t\t\tid: true,\n\t\t\tname: true,\n\t\t\tusername: true,\n\t\t\timage: { select: { id: true } },\n\t\t\tnotes: { select: { id: true, title: true } },\n\t\t},\n\t\twhere: { username: params.username },\n\t})\n\n\tinvariantResponse(owner, 'Owner not found', { status: 404 })\n\n\treturn json({ owner })\n}\n\nexport default function NotesRoute() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst user = useOptionalUser()\n\tconst isOwner = user?.id === data.owner.id\n\tconst ownerDisplayName = data.owner.name ?? data.owner.username\n\tconst navLinkDefaultClassName =\n\t\t'line-clamp-2 block rounded-l-full py-2 pl-8 pr-6 text-base lg:text-xl'\n\treturn (\n\t\t<main className=\"container flex h-full min-h-[400px] px-0 pb-12 md:px-8\">\n\t\t\t<div className=\"grid w-full grid-cols-4 bg-muted pl-2 md:container md:rounded-3xl md:pr-0\">\n\t\t\t\t<div className=\"relative col-span-1\">\n\t\t\t\t\t<div className=\"absolute inset-0 flex flex-col\">\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto={`/users/${data.owner.username}`}\n\t\t\t\t\t\t\tclassName=\"flex flex-col items-center justify-center gap-2 bg-muted pb-4 pl-8 pr-4 pt-12 lg:flex-row lg:justify-start lg:gap-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={getUserImgSrc(data.owner.image?.id)}\n\t\t\t\t\t\t\t\talt={ownerDisplayName}\n\t\t\t\t\t\t\t\tclassName=\"h-16 w-16 rounded-full object-cover lg:h-24 lg:w-24\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<h1 className=\"text-center text-base font-bold md:text-lg lg:text-left lg:text-2xl\">\n\t\t\t\t\t\t\t\t{ownerDisplayName}'s Notes\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<ul className=\"overflow-y-auto overflow-x-hidden pb-12\">\n\t\t\t\t\t\t\t{isOwner ? (\n\t\t\t\t\t\t\t\t<li className=\"p-1 pr-0\">\n\t\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\t\tto=\"new\"\n\t\t\t\t\t\t\t\t\t\tclassName={({ isActive }) =>\n\t\t\t\t\t\t\t\t\t\t\tcn(navLinkDefaultClassName, isActive && 'bg-accent')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Icon name=\"plus\">New Note</Icon>\n\t\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t{data.owner.notes.map(note => (\n\t\t\t\t\t\t\t\t<li key={note.id} className=\"p-1 pr-0\">\n\t\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\t\tto={note.id}\n\t\t\t\t\t\t\t\t\t\tpreventScrollReset\n\t\t\t\t\t\t\t\t\t\tprefetch=\"intent\"\n\t\t\t\t\t\t\t\t\t\tclassName={({ isActive }) =>\n\t\t\t\t\t\t\t\t\t\t\tcn(navLinkDefaultClassName, isActive && 'bg-accent')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{note.title}\n\t\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"relative col-span-3 bg-accent md:rounded-r-3xl\">\n\t\t\t\t\t<Outlet />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</main>\n\t)\n}\n\nexport function ErrorBoundary() {\n\treturn (\n\t\t<GeneralErrorBoundary\n\t\t\tstatusHandlers={{\n\t\t\t\t404: ({ params }) => (\n\t\t\t\t\t<p>No user with the username \"{params.username}\" exists</p>\n\t\t\t\t),\n\t\t\t}}\n\t\t/>\n\t)\n}\n"],"names":["NotesRoute","data","useLoaderData","user","useOptionalUser","isOwner","id","owner","ownerDisplayName","name","username","navLinkDefaultClassName","className","children","jsxs","jsx","Link","to","src","getUserImgSrc","image","alt","NavLink","isActive","cn","Icon","notes","map","note","preventScrollReset","prefetch","title","Outlet","ErrorBoundary","GeneralErrorBoundary","statusHandlers","params"],"mappings":"4VA0BA,SAAwBA,GAAa,OACpC,MAAMC,EAAOC,IACPC,EAAOC,IACPC,GAAUF,GAAAA,YAAAA,EAAMG,MAAOL,EAAKM,MAAMD,GAClCE,EAAmBP,EAAKM,MAAME,MAAQR,EAAKM,MAAMG,SACjDC,EACL,wEACD,aACE,OAAK,CAAAC,UAAU,yDACfC,SAACC,EAAA,KAAA,MAAA,CAAIF,UAAU,4EACdC,SAAA,CAAAE,EAAA,IAAC,OAAIH,UAAU,sBACdC,SAACC,EAAA,KAAA,MAAA,CAAIF,UAAU,iCACdC,SAAA,CAAAC,EAAA,KAACE,EAAA,CACAC,GAAI,UAAUhB,EAAKM,MAAMG,QAAQ,GACjCE,UAAU,sHAEVC,SAAA,CAAAE,EAAA,IAAC,MAAA,CACAG,IAAKC,GAAclB,EAAAA,EAAKM,MAAMa,QAAXnB,YAAAA,EAAkBK,EAAE,EACvCe,IAAKb,EACLI,UAAU,qDAAA,CACX,EACAE,EAAA,KAAC,KAAG,CAAAF,UAAU,sEACZC,SAAA,CAAAL,EAAiB,UAAA,CACnB,CAAA,CAAA,CAAA,CACD,EACAM,EAAA,KAAC,KAAG,CAAAF,UAAU,0CACZC,SAAA,CACAR,EAAAU,EAAA,IAAC,KAAG,CAAAH,UAAU,WACbC,SAAAE,EAAA,IAACO,EAAA,CACAL,GAAG,MACHL,UAAWA,CAAC,CAAEW,SAAAA,KACbC,EAAGb,EAAyBY,GAAY,WAAW,EAGpDV,SAACE,EAAA,IAAAU,EAAA,CAAKhB,KAAK,OAAOI,SAAQ,WAAA,EAC3B,EACD,EACG,KACHZ,EAAKM,MAAMmB,MAAMC,OAChBZ,EAAA,IAAA,KAAA,CAAiBH,UAAU,WAC3BC,SAAAE,EAAA,IAACO,EAAA,CACAL,GAAIW,EAAKtB,GACTuB,mBAAkB,GAClBC,SAAS,SACTlB,UAAWA,CAAC,CAAEW,SAAAA,KACbC,EAAGb,EAAyBY,GAAY,WAAW,EAGnDV,SAAKe,EAAAG,MACP,CAAA,EAVQH,EAAKtB,EAWd,CACA,CAAA,CACF,CAAA,CAAA,EACD,CACD,CAAA,QACC,MAAI,CAAAM,UAAU,iDACdC,SAAAE,EAAAA,IAACiB,IAAO,CACT,CAAA,CAAA,EACD,CACD,CAAA,CAEF,CAEO,SAASC,GAAgB,CAE9B,OAAAlB,EAAAA,IAACmB,EAAA,CACAC,eAAgB,CACf,IAAK,CAAC,CAAEC,OAAAA,CAAO,WACb,IAAE,CAAAvB,SAAA,CAAA,8BAA4BuB,EAAO1B,SAAS,UAAA,EAAQ,CAEzD,CAAA,CACD,CAEF"}