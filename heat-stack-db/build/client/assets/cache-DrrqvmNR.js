import{j as e}from"./jsx-runtime-D1yySo7E.js";import{G as h}from"./error-boundary-B0NZhsrC.js";import{F as m}from"./forms-O3akMyig.js";import{S as o}from"./spacer-_kxp_vdK.js";import{B as x}from"./button-xs8ZcSgc.js";import{a as p,b as f}from"./misc-CxaYal_B.js";import{b as j,u as y,L as g}from"./components-C2HTMhgG.js";import{a as b,b as v,F as N}from"./index-CcD7lzrX.js";import"./exports-BkEIprPr.js";import"./index-ikwP-usE.js";import"./index-DbU3sxCe.js";import"./label-Bak8eTW5.js";const z={getSitemapEntries:()=>null};function E(){const s=j(),[a]=b(),c=v(),r=a.get("query")??"",l=a.get("limit")??"100",n=a.get("instance")??s.instance,i=p(t=>{c(t)},400);return e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"text-h1",children:"Cache Admin"}),e.jsx(o,{size:"2xs"}),e.jsxs(N,{method:"get",className:"flex flex-col gap-4",onChange:t=>i(t.currentTarget),children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex flex-1 gap-4",children:[e.jsx("button",{type:"submit",className:"flex h-16 items-center justify-center",children:"ðŸ”Ž"}),e.jsx(m,{className:"flex-1",labelProps:{children:"Search"},inputProps:{type:"search",name:"query",defaultValue:r}}),e.jsx("div",{className:"flex h-16 w-14 items-center text-lg font-medium text-muted-foreground",children:e.jsx("span",{title:"Total results shown",children:s.cacheKeys.sqlite.length+s.cacheKeys.lru.length})})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(m,{labelProps:{children:"Limit"},inputProps:{name:"limit",defaultValue:l,type:"number",step:"1",min:"1",max:"10000",placeholder:"results limit"}}),e.jsx("select",{name:"instance",defaultValue:n,children:Object.entries(s.instances).map(([t,d])=>e.jsx("option",{value:t,children:[t,`(${d})`,t===s.currentInstanceInfo.currentInstance?"(current)":"",t===s.currentInstanceInfo.primaryInstance?" (primary)":""].filter(Boolean).join(" ")},t))})]})]}),e.jsx(o,{size:"2xs"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h2",{className:"text-h2",children:"LRU Cache:"}),s.cacheKeys.lru.map(t=>e.jsx(u,{cacheKey:t,instance:n,type:"lru"},t))]}),e.jsx(o,{size:"3xs"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h2",{className:"text-h2",children:"SQLite Cache:"}),s.cacheKeys.sqlite.map(t=>e.jsx(u,{cacheKey:t,instance:n,type:"sqlite"},t))]})]})}function u({cacheKey:s,instance:a,type:c}){const r=y(),l=f(),n=encodeURIComponent(s),i=`/admin/cache/${c}/${n}?instance=${a}`;return e.jsxs("div",{className:"flex items-center gap-2 font-mono",children:[e.jsxs(r.Form,{method:"POST",children:[e.jsx("input",{type:"hidden",name:"cacheKey",value:s}),e.jsx("input",{type:"hidden",name:"instance",value:a}),e.jsx("input",{type:"hidden",name:"type",value:c}),e.jsx(x,{size:"sm",variant:"secondary",...l.getButtonProps({type:"submit"}),children:r.state==="idle"?l.doubleCheck?"You sure?":"Delete":"Deleting..."})]}),e.jsx(g,{reloadDocument:!0,to:i,children:s})]})}function $(){return e.jsx(h,{statusHandlers:{403:({error:s})=>e.jsxs("p",{children:["You are not allowed to do that: ",s==null?void 0:s.data.message]})}})}export{$ as ErrorBoundary,E as default,z as handle};
//# sourceMappingURL=cache-DrrqvmNR.js.map
